<!DOCTYPE html>
<meta name="viewport" content="width = device-width, initial-scale = 1.0, user-scalable = no">
<html lang="em">
<!-- saved from url=(0014)about:internet -->
<head>
<meta charset="utf-8">
<title>Touch Screen Test</title>
<style type="text/css">
.cell{
background-color:black;
position:absolute;
}


</style>
<script type="text/javascript">

var SIZE = (Math.floor(window.innerHeight/100))+(Math.floor(window.innerWidth/100))/2;
var GAP_SIZE = 0;
var GRID = [];
var GRID_ROWS = Math.floor(window.innerHeight/(SIZE+GAP_SIZE));
var GRID_COLLUMS = Math.floor(window.innerWidth/(SIZE+GAP_SIZE));
var GRID_PANEL = {
	id:0
};
var cycle=false;
var x_position = 0;
var y_position = 0;

function populate(){
	var stage = document.getElementById("stage")
	for(var row=0;row<GRID_ROWS;row++){
		var arr = [];
		GRID.push(arr);
		for(var collum=0;collum<GRID_COLLUMS;collum++){
			var cell = document.createElement("div");
			cell.setAttribute("class","cell");
			cell.setAttribute("id","cell_"+row+","+collum)
			stage.appendChild(cell);
			cell.style.top=(row*(SIZE+GAP_SIZE))+"px";
			cell.style.left=(collum*(SIZE+GAP_SIZE))+"px";
			cell.style.height=SIZE+"px";
			cell.style.width=SIZE+"px";
			var gridPanel = Object.create(GRID_PANEL);
			gridPanel.id = "cell_"+row+","+collum;
			GRID[row].push(gridPanel);
			if(row<4||row>(GRID_ROWS-5)||collum<4||collum>(GRID_COLLUMS-5)||(row>=((GRID_ROWS/2)-2)&&row<=((GRID_ROWS/2)+2))||(collum>=((GRID_COLLUMS/2)-2)&&collum<=((GRID_COLLUMS/2)+2))){
				document.getElementById(GRID[row][collum].id).style.backgroundColor="red";
			}
		}
	}
}

function update_XnY(e){
	e.preventDefault();
	x_position = e.pageX;
	y_position = e.pageY;
	return false;
}

function cycle_XnY(e){
	e.preventDefault();
	cycle=true;
	var timer=setInterval(function(e){
		if(cycle){
			var remainder_x = x_position%SIZE;
			var remainder_y = y_position%SIZE;
			var cell_x = ((x_position-remainder_x)/SIZE);
			var cell_y = ((y_position-remainder_y)/SIZE);
			if(cell_y<4||cell_y>(GRID_ROWS-5)||cell_x<4||cell_x>(GRID_COLLUMS-5)||(cell_y>=((GRID_ROWS/2)-2)&&cell_y<=((GRID_ROWS/2)+2))||(cell_x>=((GRID_COLLUMS/2)-2)&&cell_x<=((GRID_COLLUMS/2)+2))){
				document.getElementById(GRID[cell_y][cell_x].id).style.backgroundColor="green";
			}			
			else{
				document.getElementById(GRID[cell_y][cell_x].id).style.backgroundColor="gray";
			}
		}
		else{
			clearInterval(timer);
		}
	},5);	
	return false;
}

function cancel_XnY(){
	cycle=false;
	return false;
}

</script>
</head>
<body>
<span id="stage"></div>

<script>
	populate();
	document.body.addEventListener("mousedown",function(e){cycle_XnY(e)},false);
	document.body.addEventListener("mouseup",cancel_XnY,false);
	document.body.addEventListener("mousemove",function(e){update_XnY(e)},false);
	window.addEventListener("resize",function(){location.reload(false)},false);
</script>

</body>
</html>